import{d as b,r as l,q as B,o as P,e as n,j as a,F as v,l as g,m as h,f as y,x as S,k as T,p as s}from"./index-VCZFBRp5.js";import{a as r}from"./index-NIGUFBhG.js";const x={class:"mt-2"},A=["onClick"],E={class:"mt-2"},N=["onUpdate:modelValue"],R=["onUpdate:modelValue"],j=["value"],q=["onClick"],G=b({__name:"config",setup(z){const w=l(["gpt-4.1","gpt-4.1-mini","gpt-4.1-nano","gpt-5","gpt-5-mini","gpt-5-nano","gpt-4o","gpt-4o-mini","gpt-4-turbo","gpt-4"]),p=l([]),_=B("newFile"),f=l(null),d=l(["analyzer","writer","evaluator"]),F=l(["Анализатор","Писатель","Оценщик"]),m=l(["","",""]),i=l(["gpt-4.1","gpt-4.1","gpt-4.1"]),k=async e=>{await r.delete(`/api/files/${e}`),p.value=p.value.filter(t=>t!==e)},C=async()=>{const e=_.value?.files;f.value=e?e[0]??null:null},M=async()=>{try{if(!f.value)throw new Error("No file is chosen!");const e=new FormData;e.append("file",f.value);const t=await r.post("/api/files",e,{headers:{"Content-Type":"multipart/form-data"}});p.value.push(t.data.name)}catch(e){console.error(e),alert("Произошла ошибка!")}},$=async()=>{for(let e=0;e<3;e++)try{const t=await r.get(`/api/config/prompts/${d.value[e]}`);m.value[e]=t.data.prompt;const u=await r.get(`/api/config/model/${d.value[e]}`);i.value[e]=u.data.model}catch(t){console.error(t)}},D=async()=>{try{const e=await r.get("/api/files");p.value=e.data}catch(e){console.error(e)}},U=async e=>{if(!w.value.includes(i.value[e])){i.value[e]="gpt-4.1";return}try{await r.put(`/api/config/prompts/${d.value[e]}`,{prompt:m.value[e]}),await r.put(`/api/config/model/${d.value[e]}`,{model:i.value[e]})}catch(t){console.error(t)}};return P(async()=>{await D(),await $()}),(e,t)=>(s(),n(v,null,[t[0]||(t[0]=a("h1",{class:"text-4xl mt-4"},"Конфигурация",-1)),t[1]||(t[1]=a("h2",{class:"text-2xl mt-2"},"Файлы",-1)),(s(!0),n(v,null,g(p.value,(u,c)=>(s(),n("div",x,[a("h3",null,h(u),1),a("button",{onClick:o=>k(u)},"Удалить",8,A)]))),256)),a("input",{onChange:C,ref:"newFile",type:"file",class:"mt-4"},null,544),a("button",{onClick:M},"Добавить"),t[2]||(t[2]=a("h2",{class:"mt-8"},"Промпты",-1)),(s(!0),n(v,null,g(F.value,(u,c)=>(s(),n("div",E,[a("h3",null,h(u),1),y(a("textarea",{name:"",id:"","onUpdate:modelValue":o=>m.value[c]=o},null,8,N),[[S,m.value[c]]]),y(a("select",{name:"",id:"","onUpdate:modelValue":o=>i.value[c]=o},[(s(!0),n(v,null,g(w.value,(o,V)=>(s(),n("option",{value:o,key:V},h(o),9,j))),128))],8,R),[[T,i.value[c]]]),a("button",{onClick:o=>U(c)},"Сохранить",8,q)]))),256))],64))}});export{G as default};
