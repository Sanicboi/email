import{d as V,r as l,q as x,o as B,e as n,j as a,F as v,l as f,m as b,f as h,x as P,k as S,p as s}from"./index-BWqLNhdj.js";import{a as r}from"./index-NIGUFBhG.js";const T={class:"mt-2"},A=["onClick"],E={class:"mt-2 flex flex-col items-start"},N=["onUpdate:modelValue"],R=["onUpdate:modelValue"],j=["value"],q=["onClick"],G=V({__name:"config",setup(z){const y=l(["gpt-4.1","gpt-4.1-mini","gpt-4.1-nano","gpt-5","gpt-5-mini","gpt-5-nano","gpt-4o","gpt-4o-mini","gpt-4-turbo","gpt-4"]),p=l([]),w=x("newFile"),g=l(null),d=l(["analyzer","writer","evaluator"]),_=l(["Анализатор","Писатель","Оценщик"]),m=l(["","",""]),i=l(["gpt-4.1","gpt-4.1","gpt-4.1"]),k=async e=>{await r.delete(`/api/files/${e}`),p.value=p.value.filter(t=>t!==e)},F=async()=>{const e=w.value?.files;g.value=e?e[0]??null:null},C=async()=>{try{if(!g.value)throw new Error("No file is chosen!");const e=new FormData;e.append("file",g.value);const t=await r.post("/api/files",e,{headers:{"Content-Type":"multipart/form-data"}});p.value.push(t.data.name)}catch(e){console.error(e),alert("Произошла ошибка!")}},M=async()=>{for(let e=0;e<3;e++)try{const t=await r.get(`/api/config/prompts/${d.value[e]}`);m.value[e]=t.data.prompt;const c=await r.get(`/api/config/model/${d.value[e]}`);i.value[e]=c.data.model}catch(t){console.error(t)}},$=async()=>{try{const e=await r.get("/api/files");p.value=e.data}catch(e){console.error(e)}},D=async e=>{if(!y.value.includes(i.value[e])){i.value[e]="gpt-4.1";return}try{await r.put(`/api/config/prompts/${d.value[e]}`,{prompt:m.value[e]}),await r.put(`/api/config/model/${d.value[e]}`,{model:i.value[e]})}catch(t){console.error(t)}};return B(async()=>{await $(),await M()}),(e,t)=>(s(),n(v,null,[t[0]||(t[0]=a("h1",{class:"text-4xl mt-4"},"Конфигурация",-1)),t[1]||(t[1]=a("h2",{class:"text-2xl mt-2"},"Файлы",-1)),(s(!0),n(v,null,f(p.value,(c,u)=>(s(),n("div",T,[a("h3",null,b(c),1),a("button",{onClick:o=>k(c)},"Удалить",8,A)]))),256)),a("input",{onChange:F,ref:"newFile",type:"file",class:"mt-4 bg-gray-300 border-2 border-black"},null,544),a("button",{class:"bg-gray-300 border-2 border-black outline-none",onClick:C},"Добавить"),t[2]||(t[2]=a("h2",{class:"mt-8"},"Промпты",-1)),(s(!0),n(v,null,f(_.value,(c,u)=>(s(),n("div",E,[a("h3",null,b(c),1),h(a("textarea",{name:"",id:"",class:"bg-gray-300 border-2 border-black outline-none","onUpdate:modelValue":o=>m.value[u]=o},null,8,N),[[P,m.value[u]]]),h(a("select",{name:"",id:"","onUpdate:modelValue":o=>i.value[u]=o},[(s(!0),n(v,null,f(y.value,(o,U)=>(s(),n("option",{value:o,key:U},b(o),9,j))),128))],8,R),[[S,i.value[u]]]),a("button",{class:"bg-gray-300 border-2 border-black",onClick:o=>D(u)},"Сохранить",8,q)]))),256))],64))}});export{G as default};
