syntax = "proto3";

import "shared.proto";
import "prompts.proto";
import "files.proto";
import "model.proto";

service AI {
    rpc getPrompt(Agent) returns (Prompt);
    rpc setPrompt(Prompt) returns (Empty);

    rpc getFiles(Empty) returns (FilesList);
    rpc addFile(FileData) returns (FileName);
    rpc deleteFile(FileName) returns (Empty);

    rpc getModel(Agent) returns (ModelData);
    rpc setModel(ModelData) returns (Empty);

    rpc write(UserData) returns (AIMessage);
    rpc respond(UserMessage) returns (AIMessage);
    rpc heat(ConversationData) returns (AIMessage);

    rpc analyze(UserMessage) returns (ConversationAnalysis);
    rpc evaluate(ConversationData) returns (MessageEvaluation);
}

message UserData {
    string data = 1;
}

message UserMessage {
    string text = 1;
    string resId = 2;
}


message ConversationData {
    string resId = 1;
}

message AIMessage {
    string text = 1;
    string id = 2;
}

message ConversationAnalysis {
    int32 enthusiasm = 1;
    int32 rating = 2;
    string comment = 3;
    bool isDelayed = 4;
    string delayDate = 5;
}

message MessageEvaluation {
    int32 rating = 1;
    string comment = 2;
}